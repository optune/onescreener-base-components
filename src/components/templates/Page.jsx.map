{"version":3,"file":"Page.jsx","sources":["Page.jsx"],"sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { Fragment, useState, useEffect } from 'react'\nimport styled from 'styled-components'\n\nimport { Sponsors } from '../molecules/sponsors/Sponsors'\n\n// Background\nimport { Background } from '../atoms/Background.jsx'\n\n// Boxes\nimport { LogoBox } from '../organisms/LogoBox.jsx'\nimport { ContentBox } from '../organisms/ContentBox.jsx'\nimport { LinksBox } from '../organisms/LinksBox.jsx'\n\n// Icons\nimport { Links } from '../icons/platform/index.jsx'\n\n// Utils\nimport { getImageUrl } from '../../utils/getImageUrl.js'\n\n// Global Styles\nimport GlobalStyle from '../../style/global.js'\n\nconst PageContainer = styled.div`\n  position: absolute;\n\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: ${({ color = '#000000' }) => color};\n  background-image: ${({ preloadImage }) => `url(${preloadImage})`};\n  background-repeat: no-repeat;\n  background-position: ${({ focusPoint }) => focusPoint};\n  background-size: ${({ fullscreen }) => (fullscreen ? 'cover' : 'contain')};\n  display: flex;\n`\n\nconst ForegroundContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  display: flex;\n  z-index: 2;\n`\n\nconst BacklinkUrl =\n  'https://res.cloudinary.com/optune-me/image/upload/b_rgb:808080,bo_10px_solid_rgb:808080,e_blackwhite,q_auto:good,c_fit,w_70,f_auto/v1558014130/onescreener-v2/app/logo-onescreener.png'\n\nconst BackLink = styled.a`\n  position: fixed;\n  background-image: url(${BacklinkUrl});\n  background-size: contain;\n  background-color: #808080;\n  background-position: center;\n  background-repeat: no-repeat;\n  width: 70px;\n  height: 15px;\n  opacity: 0.3;\n  transform: rotate(-90deg);\n  transform-origin: 100% 100%;\n  right: 0;\n  color: #ffffff;\n\n  & h1 {\n    color: #808080;\n    font-size: 5px;\n    opacity: 0.1;\n  }\n`\n\nconst LogoContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nexport const Page = ({ page, noBacklink }) => {\n  const [ssrDone, setSsrDone] = useState(false)\n  useEffect(() => {\n    setSsrDone(true)\n  }, [])\n  const getUrl = getImageUrl(ssrDone)\n\n  let PageComponent = null\n\n  if (page) {\n    const { background, logo, content, gigAPI } = page\n    const { links } = page || { links: { list: [] } }\n\n    const { font, fontURL } = page.logo.text\n\n    // Importing font to page\n    let styles = document.head.getElementsByTagName('style')\n    let style\n\n    for (let i = 0; i < styles.length; i++) {\n      if (styles[i].dataset.font !== undefined) {\n        style = styles[i]\n      }\n    }\n\n    if (!style) {\n      style = document.createElement('style')\n      style.setAttribute('data-font', font)\n      style.innerHTML = fontURL + ` .apply-font {font-family: '${font}';}` // Applying font to the logo\n      document.getElementsByTagName('head')[0].appendChild(style)\n    }\n\n    if (style) {\n      style.setAttribute('data-font', font)\n      style.innerHTML = fontURL + ` .apply-font {font-family: '${font}';}` // Applying font to the logo\n    }\n\n    PageComponent = (\n      <Fragment>\n        <GlobalStyle />\n        <PageContainer\n          preloadImage={getImageUrl(false)(background)}\n          focusPoint={background.focusPoint}\n          fullscreen={background.fullscreen}\n          color={background.color}\n        >\n          {ssrDone && <Background background={background} getImageUrl={getUrl} />}\n\n          <ForegroundContainer>\n            {/* Back Link to onescreener.com */}\n            {!noBacklink && (\n              <BackLink\n                href=\"https://www.onescreener.com\"\n                target=\"_blank\"\n                title=\"created with onescreener.com\"\n              >\n                <h1>created by onescreener.com</h1>\n              </BackLink>\n            )}\n\n            {/* Logo */}\n            {logo && <LogoBox zIndex={2} logo={logo} getImageUrl={getUrl} />}\n\n            {/* Logo */}\n            <ContentBox content={content} links={links} />\n\n            {/* Links */}\n            {links.list.length > 0 && (\n              <LinksBox position={links.position} zIndex={4}>\n                {Links(links, content)}\n              </LinksBox>\n            )}\n          </ForegroundContainer>\n        </PageContainer>\n        {content?.showCustomHTML && <Sponsors />}\n      </Fragment>\n    )\n  }\n\n  return PageComponent\n}\n"],"names":["PageContainer","styled","div","color","preloadImage","focusPoint","fullscreen","ForegroundContainer","BacklinkUrl","BackLink","a","LogoContainer","Page","page","noBacklink","ssrDone","setSsrDone","useState","useEffect","getUrl","getImageUrl","PageComponent","background","logo","content","gigAPI","links","list","font","fontURL","text","styles","document","head","getElementsByTagName","style","i","length","dataset","undefined","createElement","setAttribute","innerHTML","appendChild","position","Links","showCustomHTML"],"mappings":"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"}